# MewTrack 故障排除指南

## 常见问题

### 1. "Extension context invalidated" 错误

**症状**：
- 控制台显示 "Extension context invalidated" 错误
- 插件功能无法正常工作
- 无法保存或读取设置

**原因**：
- 插件被更新或重新加载
- Chrome 扩展管理器重新加载了插件
- 开发者模式下修改了插件代码

**解决方法**：
1. **刷新网页**：按 F5 或 Ctrl+R (Mac: Cmd+R) 刷新当前页面
2. **重新加载插件**：
   - 打开 Chrome 扩展管理页面 (chrome://extensions/)
   - 找到 MewTrack
   - 点击刷新图标
3. **关闭并重新打开标签页**

### 2. YouTube/Bilibili 视频不弹窗

**可能原因**：

1. **今天已经打过卡**
   - 解决：使用调试页面清除今日数据
   - 或等待明天再试

2. **视频还在加载中**
   - 解决：等待 3-5 秒让页面完全加载
   - 查看控制台日志确认检测状态

3. **视频被判定为娱乐内容**
   - 查看控制台日志中的 "学习内容检测结果"
   - 如果是 false，说明被判定为娱乐内容

4. **域名不匹配**
   - 确保访问的是 youtube.com 或 bilibili.com
   - 支持 www 前缀

### 3. OpenAI API 相关问题

**API 密钥无效**：
- 检查密钥是否以 "sk-" 开头
- 确认密钥没有过期
- 检查是否有足够的 API 额度

**API 调用失败**：
- 查看控制台中的详细错误信息
- 常见错误代码：
  - 401: API 密钥无效
  - 429: 超过速率限制
  - 500: OpenAI 服务器错误

### 4. 调试方法

1. **打开浏览器控制台**：
   - Windows/Linux: F12 或 Ctrl+Shift+I
   - Mac: Cmd+Option+I

2. **查看 MewTrack 日志**：
   - 所有日志都以 "MewTrack:" 开头
   - 搜索 "MewTrack" 过滤相关日志

3. **使用调试页面**：
   - 打开插件目录下的 debug.html
   - 可以测试各项功能是否正常

4. **清除数据重试**：
   - 设置页面 → 重置所有数据
   - 或使用调试页面的清除功能

### 5. 性能优化建议

1. **减少打开的标签页数量**
2. **定期清理浏览器缓存**
3. **如果不需要 AI 识别，可以不配置 OpenAI API**

## 获取帮助

如果问题仍未解决：

1. 收集以下信息：
   - Chrome 版本
   - 插件版本
   - 控制台错误截图
   - 问题复现步骤

2. 在项目 GitHub Issues 页面提交问题

## 开发者调试

如果你是开发者，可以：

1. 查看 `debug-video.js` 中的调试输出
2. 使用 `test-youtube.html` 测试页面
3. 在代码中添加更多 `console.log` 语句
4. 使用 Chrome DevTools 的断点调试功能